(function(b){var a={_evaluating:!1},h={generatePlaceholder:function(){return a.placeholder||b('<div id="'+a.id+'" class="placeholder"><div class="var1"></div><div class="var2"></div></div>').appendTo("body")},evaluate:function(d){a._evaluating||(a._evaluating=!0,d.each(function(){h.render(b(this))}),a._evaluating=!1)},render:function(d){var c=d.attr("data-ip-type")||!1,f=d.attr("data-ip-src")||!1,g=[],i,e;if(f&&(e=h.validateSrc(f))){a.placeholder.addClass(c);g[0]=parseInt(b(".var1",a.placeholder).css("z-index"),
10)||0;g[1]=parseInt(b(".var2",a.placeholder).css("z-index"),10)||0;a.placeholder.removeClass(c);i=f.match(e.regex);for(f=c=0;c<e.variables.length;c++,f++)i[e.variables[c]]=g[f];i.shift();e=i.join("");g=b("img",d);g.length?g.attr("src",e):b('<img src="'+e+'" />').appendTo(d)}},validateSrc:function(d){var c,b=0;for(c in a.patterns)if(a.patterns.hasOwnProperty(c)){if(d.match(a.patterns[c].regex))return a.patterns[b];b++}return!1}};b.fn.responsiveImagery=function(d){var c=this;a=b.extend({patterns:[],
id:Math.random().toString(36).substr(2,5),events:"resize"},d);a.placeholder=h.generatePlaceholder();b(window).bind(a.events,function(){h.evaluate(c)});h.evaluate(this)}})(jQuery);