(function(b){var a={_evaluating:!1},h={generatePlaceholder:function(){return a.placeholder||b('<div id="'+a.id+'" class="placeholder"><div class="var1"></div><div class="var2"></div></div>').appendTo("body")},evaluate:function(d){a._evaluating||(a._evaluating=!0,d.each(function(){h.render(b(this))}),a._evaluating=!1)},render:function(d){var c=d.attr("data-ip-type")||!1,g=d.attr("data-ip-src")||!1,f=[],i,e;if(g&&(e=h.validateSrc(g))&&e.regex&&e.variables){a.placeholder.addClass(c);f[0]=parseInt(b(".var1",
a.placeholder).css("z-index"),10)||0;f[1]=parseInt(b(".var2",a.placeholder).css("z-index"),10)||0;a.placeholder.removeClass(c);i=g.match(e.regex);for(g=c=0;c<f.length;c++,g++)i[e.variables[c]]=f[g];i.shift();e=i.join("");f=b("img",d);f.length?f.attr("src",e):b('<img src="'+e+'" />').appendTo(d)}},validateSrc:function(d){var c,b=0;for(c in a.patterns)if(a.patterns.hasOwnProperty(c)){if(d.match(a.patterns[c].regex))return a.patterns[b];b++}return!1}};b.fn.responsiveImagery=function(d){var c=this;a=
b.extend({patterns:[],id:Math.random().toString(36).substr(2,5),events:"resize"},d);a.placeholder=h.generatePlaceholder();b(window).bind(a.events,function(){h.evaluate(c)});h.evaluate(this)}})(jQuery);